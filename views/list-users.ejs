<!DOCTYPE html>
<html lang="en">

<%- include('partials/head'); %>

    <body>
        <div class="container">
            <h1>Users List</h1>
            <p>Click names to see data about choices in the game.</p>
            <table id="userTable" class="table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>First name</th>
                        <th>Last name</th>
                        <th>Admin</th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>

        <script>
            var url = "/api/users";
            // get the rows from the SQL query
            $.get(url, function (data, status) {
                var tb = document.querySelector('#userTable tbody');
                for (var i = 0; i < data.length; i++) {
                    //console.log(data[i]);
                    var row = tb.insertRow(0);
                    var cell1 = row.insertCell(0);
                    var cell2 = row.insertCell(1);
                    var cell3 = row.insertCell(2);
                    var cell4 = row.insertCell(3);

                    cell1.innerHTML = "<a href =/show-user/" + data[i].id + ">" + data[i].username + "</a>";
                    cell2.innerHTML = data[i].first_name;
                    cell3.innerHTML = data[i].last_name;
                    if (data[i].is_admin == 1)
                        cell4.innerHTML = "yes";
                    else
                        cell4.innerHTML = "no";
                }
            });

        </script>
    </body>

</html>